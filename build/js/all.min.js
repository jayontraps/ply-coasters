/*
 * jQuery Easing v1.3 - http://gsgd.co.uk/sandbox/jquery/easing/
 *
 * Uses the built in easing capabilities added In jQuery 1.1
 * to offer multiple easing options
 *
 * TERMS OF USE - jQuery Easing
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2008 George McGinley Smith
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
*/

// t: current time, b: begInnIng value, c: change In value, d: duration
jQuery.easing['jswing'] = jQuery.easing['swing'];

jQuery.extend( jQuery.easing,
{
	def: 'easeOutQuad',
	swing: function (x, t, b, c, d) {
		//alert(jQuery.easing.default);
		return jQuery.easing[jQuery.easing.def](x, t, b, c, d);
	},
	easeInQuad: function (x, t, b, c, d) {
		return c*(t/=d)*t + b;
	},
	easeOutQuad: function (x, t, b, c, d) {
		return -c *(t/=d)*(t-2) + b;
	},
	easeInOutQuad: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t + b;
		return -c/2 * ((--t)*(t-2) - 1) + b;
	},
	easeInCubic: function (x, t, b, c, d) {
		return c*(t/=d)*t*t + b;
	},
	easeOutCubic: function (x, t, b, c, d) {
		return c*((t=t/d-1)*t*t + 1) + b;
	},
	easeInOutCubic: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t + b;
		return c/2*((t-=2)*t*t + 2) + b;
	},
	easeInQuart: function (x, t, b, c, d) {
		return c*(t/=d)*t*t*t + b;
	},
	easeOutQuart: function (x, t, b, c, d) {
		return -c * ((t=t/d-1)*t*t*t - 1) + b;
	},
	easeInOutQuart: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t*t + b;
		return -c/2 * ((t-=2)*t*t*t - 2) + b;
	},
	easeInQuint: function (x, t, b, c, d) {
		return c*(t/=d)*t*t*t*t + b;
	},
	easeOutQuint: function (x, t, b, c, d) {
		return c*((t=t/d-1)*t*t*t*t + 1) + b;
	},
	easeInOutQuint: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;
		return c/2*((t-=2)*t*t*t*t + 2) + b;
	},
	easeInSine: function (x, t, b, c, d) {
		return -c * Math.cos(t/d * (Math.PI/2)) + c + b;
	},
	easeOutSine: function (x, t, b, c, d) {
		return c * Math.sin(t/d * (Math.PI/2)) + b;
	},
	easeInOutSine: function (x, t, b, c, d) {
		return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;
	},
	easeInExpo: function (x, t, b, c, d) {
		return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;
	},
	easeOutExpo: function (x, t, b, c, d) {
		return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;
	},
	easeInOutExpo: function (x, t, b, c, d) {
		if (t==0) return b;
		if (t==d) return b+c;
		if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;
		return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;
	},
	easeInCirc: function (x, t, b, c, d) {
		return -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;
	},
	easeOutCirc: function (x, t, b, c, d) {
		return c * Math.sqrt(1 - (t=t/d-1)*t) + b;
	},
	easeInOutCirc: function (x, t, b, c, d) {
		if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;
		return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;
	},
	easeInElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
	},
	easeOutElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;
	},
	easeInOutElastic: function (x, t, b, c, d) {
		var s=1.70158;var p=0;var a=c;
		if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);
		if (a < Math.abs(c)) { a=c; var s=p/4; }
		else var s = p/(2*Math.PI) * Math.asin (c/a);
		if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;
		return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;
	},
	easeInBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		return c*(t/=d)*t*((s+1)*t - s) + b;
	},
	easeOutBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158;
		return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;
	},
	easeInOutBack: function (x, t, b, c, d, s) {
		if (s == undefined) s = 1.70158; 
		if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;
		return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;
	},
	easeInBounce: function (x, t, b, c, d) {
		return c - jQuery.easing.easeOutBounce (x, d-t, 0, c, d) + b;
	},
	easeOutBounce: function (x, t, b, c, d) {
		if ((t/=d) < (1/2.75)) {
			return c*(7.5625*t*t) + b;
		} else if (t < (2/2.75)) {
			return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;
		} else if (t < (2.5/2.75)) {
			return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;
		} else {
			return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;
		}
	},
	easeInOutBounce: function (x, t, b, c, d) {
		if (t < d/2) return jQuery.easing.easeInBounce (x, t*2, 0, c, d) * .5 + b;
		return jQuery.easing.easeOutBounce (x, t*2-d, 0, c, d) * .5 + c*.5 + b;
	}
});

/*
 *
 * TERMS OF USE - EASING EQUATIONS
 * 
 * Open source under the BSD License. 
 * 
 * Copyright Â© 2001 Robert Penner
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification, 
 * are permitted provided that the following conditions are met:
 * 
 * Redistributions of source code must retain the above copyright notice, this list of 
 * conditions and the following disclaimer.
 * Redistributions in binary form must reproduce the above copyright notice, this list 
 * of conditions and the following disclaimer in the documentation and/or other materials 
 * provided with the distribution.
 * 
 * Neither the name of the author nor the names of contributors may be used to endorse 
 * or promote products derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY 
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 *  GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED 
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 *  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED 
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 *
 */
/*
 * jQuery FlexSlider v2.5.0
 * Copyright 2012 WooThemes
 * Contributing Author: Tyler Smith
 */!function($){$.flexslider=function(e,t){var a=$(e);a.vars=$.extend({},$.flexslider.defaults,t);var n=a.vars.namespace,i=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,s=("ontouchstart"in window||i||window.DocumentTouch&&document instanceof DocumentTouch)&&a.vars.touch,r="click touchend MSPointerUp keyup",o="",l,c="vertical"===a.vars.direction,d=a.vars.reverse,u=a.vars.itemWidth>0,v="fade"===a.vars.animation,p=""!==a.vars.asNavFor,m={},f=!0;$.data(e,"flexslider",a),m={init:function(){a.animating=!1,a.currentSlide=parseInt(a.vars.startAt?a.vars.startAt:0,10),isNaN(a.currentSlide)&&(a.currentSlide=0),a.animatingTo=a.currentSlide,a.atEnd=0===a.currentSlide||a.currentSlide===a.last,a.containerSelector=a.vars.selector.substr(0,a.vars.selector.search(" ")),a.slides=$(a.vars.selector,a),a.container=$(a.containerSelector,a),a.count=a.slides.length,a.syncExists=$(a.vars.sync).length>0,"slide"===a.vars.animation&&(a.vars.animation="swing"),a.prop=c?"top":"marginLeft",a.args={},a.manualPause=!1,a.stopped=!1,a.started=!1,a.startTimeout=null,a.transitions=!a.vars.video&&!v&&a.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in t)if(void 0!==e.style[t[n]])return a.pfx=t[n].replace("Perspective","").toLowerCase(),a.prop="-"+a.pfx+"-transform",!0;return!1}(),a.ensureAnimationEnd="",""!==a.vars.controlsContainer&&(a.controlsContainer=$(a.vars.controlsContainer).length>0&&$(a.vars.controlsContainer)),""!==a.vars.manualControls&&(a.manualControls=$(a.vars.manualControls).length>0&&$(a.vars.manualControls)),""!==a.vars.customDirectionNav&&(a.customDirectionNav=2===$(a.vars.customDirectionNav).length&&$(a.vars.customDirectionNav)),a.vars.randomize&&(a.slides.sort(function(){return Math.round(Math.random())-.5}),a.container.empty().append(a.slides)),a.doMath(),a.setup("init"),a.vars.controlNav&&m.controlNav.setup(),a.vars.directionNav&&m.directionNav.setup(),a.vars.keyboard&&(1===$(a.containerSelector).length||a.vars.multipleKeyboard)&&$(document).bind("keyup",function(e){var t=e.keyCode;if(!a.animating&&(39===t||37===t)){var n=39===t?a.getTarget("next"):37===t?a.getTarget("prev"):!1;a.flexAnimate(n,a.vars.pauseOnAction)}}),a.vars.mousewheel&&a.bind("mousewheel",function(e,t,n,i){e.preventDefault();var s=a.getTarget(0>t?"next":"prev");a.flexAnimate(s,a.vars.pauseOnAction)}),a.vars.pausePlay&&m.pausePlay.setup(),a.vars.slideshow&&a.vars.pauseInvisible&&m.pauseInvisible.init(),a.vars.slideshow&&(a.vars.pauseOnHover&&a.hover(function(){a.manualPlay||a.manualPause||a.pause()},function(){a.manualPause||a.manualPlay||a.stopped||a.play()}),a.vars.pauseInvisible&&m.pauseInvisible.isHidden()||(a.vars.initDelay>0?a.startTimeout=setTimeout(a.play,a.vars.initDelay):a.play())),p&&m.asNav.setup(),s&&a.vars.touch&&m.touch(),(!v||v&&a.vars.smoothHeight)&&$(window).bind("resize orientationchange focus",m.resize),a.find("img").attr("draggable","false"),setTimeout(function(){a.vars.start(a)},200)},asNav:{setup:function(){a.asNav=!0,a.animatingTo=Math.floor(a.currentSlide/a.move),a.currentItem=a.currentSlide,a.slides.removeClass(n+"active-slide").eq(a.currentItem).addClass(n+"active-slide"),i?(e._slider=a,a.slides.each(function(){var e=this;e._gesture=new MSGesture,e._gesture.target=e,e.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),e.addEventListener("MSGestureTap",function(e){e.preventDefault();var t=$(this),n=t.index();$(a.vars.asNavFor).data("flexslider").animating||t.hasClass("active")||(a.direction=a.currentItem<n?"next":"prev",a.flexAnimate(n,a.vars.pauseOnAction,!1,!0,!0))})})):a.slides.on(r,function(e){e.preventDefault();var t=$(this),i=t.index(),s=t.offset().left-$(a).scrollLeft();0>=s&&t.hasClass(n+"active-slide")?a.flexAnimate(a.getTarget("prev"),!0):$(a.vars.asNavFor).data("flexslider").animating||t.hasClass(n+"active-slide")||(a.direction=a.currentItem<i?"next":"prev",a.flexAnimate(i,a.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){a.manualControls?m.controlNav.setupManual():m.controlNav.setupPaging()},setupPaging:function(){var e="thumbnails"===a.vars.controlNav?"control-thumbs":"control-paging",t=1,i,s;if(a.controlNavScaffold=$('<ol class="'+n+"control-nav "+n+e+'"></ol>'),a.pagingCount>1)for(var l=0;l<a.pagingCount;l++){if(s=a.slides.eq(l),i="thumbnails"===a.vars.controlNav?'<img src="'+s.attr("data-thumb")+'"/>':"<a>"+t+"</a>","thumbnails"===a.vars.controlNav&&!0===a.vars.thumbCaptions){var c=s.attr("data-thumbcaption");""!==c&&void 0!==c&&(i+='<span class="'+n+'caption">'+c+"</span>")}a.controlNavScaffold.append("<li>"+i+"</li>"),t++}a.controlsContainer?$(a.controlsContainer).append(a.controlNavScaffold):a.append(a.controlNavScaffold),m.controlNav.set(),m.controlNav.active(),a.controlNavScaffold.delegate("a, img",r,function(e){if(e.preventDefault(),""===o||o===e.type){var t=$(this),i=a.controlNav.index(t);t.hasClass(n+"active")||(a.direction=i>a.currentSlide?"next":"prev",a.flexAnimate(i,a.vars.pauseOnAction))}""===o&&(o=e.type),m.setToClearWatchedEvent()})},setupManual:function(){a.controlNav=a.manualControls,m.controlNav.active(),a.controlNav.bind(r,function(e){if(e.preventDefault(),""===o||o===e.type){var t=$(this),i=a.controlNav.index(t);t.hasClass(n+"active")||(a.direction=i>a.currentSlide?"next":"prev",a.flexAnimate(i,a.vars.pauseOnAction))}""===o&&(o=e.type),m.setToClearWatchedEvent()})},set:function(){var e="thumbnails"===a.vars.controlNav?"img":"a";a.controlNav=$("."+n+"control-nav li "+e,a.controlsContainer?a.controlsContainer:a)},active:function(){a.controlNav.removeClass(n+"active").eq(a.animatingTo).addClass(n+"active")},update:function(e,t){a.pagingCount>1&&"add"===e?a.controlNavScaffold.append($("<li><a>"+a.count+"</a></li>")):1===a.pagingCount?a.controlNavScaffold.find("li").remove():a.controlNav.eq(t).closest("li").remove(),m.controlNav.set(),a.pagingCount>1&&a.pagingCount!==a.controlNav.length?a.update(t,e):m.controlNav.active()}},directionNav:{setup:function(){var e=$('<ul class="'+n+'direction-nav"><li class="'+n+'nav-prev"><a class="'+n+'prev" href="#">'+a.vars.prevText+'</a></li><li class="'+n+'nav-next"><a class="'+n+'next" href="#">'+a.vars.nextText+"</a></li></ul>");a.customDirectionNav?a.directionNav=a.customDirectionNav:a.controlsContainer?($(a.controlsContainer).append(e),a.directionNav=$("."+n+"direction-nav li a",a.controlsContainer)):(a.append(e),a.directionNav=$("."+n+"direction-nav li a",a)),m.directionNav.update(),a.directionNav.bind(r,function(e){e.preventDefault();var t;(""===o||o===e.type)&&(t=a.getTarget($(this).hasClass(n+"next")?"next":"prev"),a.flexAnimate(t,a.vars.pauseOnAction)),""===o&&(o=e.type),m.setToClearWatchedEvent()})},update:function(){var e=n+"disabled";1===a.pagingCount?a.directionNav.addClass(e).attr("tabindex","-1"):a.vars.animationLoop?a.directionNav.removeClass(e).removeAttr("tabindex"):0===a.animatingTo?a.directionNav.removeClass(e).filter("."+n+"prev").addClass(e).attr("tabindex","-1"):a.animatingTo===a.last?a.directionNav.removeClass(e).filter("."+n+"next").addClass(e).attr("tabindex","-1"):a.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var e=$('<div class="'+n+'pauseplay"><a></a></div>');a.controlsContainer?(a.controlsContainer.append(e),a.pausePlay=$("."+n+"pauseplay a",a.controlsContainer)):(a.append(e),a.pausePlay=$("."+n+"pauseplay a",a)),m.pausePlay.update(a.vars.slideshow?n+"pause":n+"play"),a.pausePlay.bind(r,function(e){e.preventDefault(),(""===o||o===e.type)&&($(this).hasClass(n+"pause")?(a.manualPause=!0,a.manualPlay=!1,a.pause()):(a.manualPause=!1,a.manualPlay=!0,a.play())),""===o&&(o=e.type),m.setToClearWatchedEvent()})},update:function(e){"play"===e?a.pausePlay.removeClass(n+"pause").addClass(n+"play").html(a.vars.playText):a.pausePlay.removeClass(n+"play").addClass(n+"pause").html(a.vars.pauseText)}},touch:function(){function t(t){t.stopPropagation(),a.animating?t.preventDefault():(a.pause(),e._gesture.addPointer(t.pointerId),w=0,p=c?a.h:a.w,f=Number(new Date),l=u&&d&&a.animatingTo===a.last?0:u&&d?a.limit-(a.itemW+a.vars.itemMargin)*a.move*a.animatingTo:u&&a.currentSlide===a.last?a.limit:u?(a.itemW+a.vars.itemMargin)*a.move*a.currentSlide:d?(a.last-a.currentSlide+a.cloneOffset)*p:(a.currentSlide+a.cloneOffset)*p)}function n(t){t.stopPropagation();var a=t.target._slider;if(a){var n=-t.translationX,i=-t.translationY;return w+=c?i:n,m=w,y=c?Math.abs(w)<Math.abs(-n):Math.abs(w)<Math.abs(-i),t.detail===t.MSGESTURE_FLAG_INERTIA?void setImmediate(function(){e._gesture.stop()}):void((!y||Number(new Date)-f>500)&&(t.preventDefault(),!v&&a.transitions&&(a.vars.animationLoop||(m=w/(0===a.currentSlide&&0>w||a.currentSlide===a.last&&w>0?Math.abs(w)/p+2:1)),a.setProps(l+m,"setTouch"))))}}function s(e){e.stopPropagation();var t=e.target._slider;if(t){if(t.animatingTo===t.currentSlide&&!y&&null!==m){var a=d?-m:m,n=t.getTarget(a>0?"next":"prev");t.canAdvance(n)&&(Number(new Date)-f<550&&Math.abs(a)>50||Math.abs(a)>p/2)?t.flexAnimate(n,t.vars.pauseOnAction):v||t.flexAnimate(t.currentSlide,t.vars.pauseOnAction,!0)}r=null,o=null,m=null,l=null,w=0}}var r,o,l,p,m,f,g,h,S,y=!1,x=0,b=0,w=0;i?(e.style.msTouchAction="none",e._gesture=new MSGesture,e._gesture.target=e,e.addEventListener("MSPointerDown",t,!1),e._slider=a,e.addEventListener("MSGestureChange",n,!1),e.addEventListener("MSGestureEnd",s,!1)):(g=function(t){a.animating?t.preventDefault():(window.navigator.msPointerEnabled||1===t.touches.length)&&(a.pause(),p=c?a.h:a.w,f=Number(new Date),x=t.touches[0].pageX,b=t.touches[0].pageY,l=u&&d&&a.animatingTo===a.last?0:u&&d?a.limit-(a.itemW+a.vars.itemMargin)*a.move*a.animatingTo:u&&a.currentSlide===a.last?a.limit:u?(a.itemW+a.vars.itemMargin)*a.move*a.currentSlide:d?(a.last-a.currentSlide+a.cloneOffset)*p:(a.currentSlide+a.cloneOffset)*p,r=c?b:x,o=c?x:b,e.addEventListener("touchmove",h,!1),e.addEventListener("touchend",S,!1))},h=function(e){x=e.touches[0].pageX,b=e.touches[0].pageY,m=c?r-b:r-x,y=c?Math.abs(m)<Math.abs(x-o):Math.abs(m)<Math.abs(b-o);var t=500;(!y||Number(new Date)-f>t)&&(e.preventDefault(),!v&&a.transitions&&(a.vars.animationLoop||(m/=0===a.currentSlide&&0>m||a.currentSlide===a.last&&m>0?Math.abs(m)/p+2:1),a.setProps(l+m,"setTouch")))},S=function(t){if(e.removeEventListener("touchmove",h,!1),a.animatingTo===a.currentSlide&&!y&&null!==m){var n=d?-m:m,i=a.getTarget(n>0?"next":"prev");a.canAdvance(i)&&(Number(new Date)-f<550&&Math.abs(n)>50||Math.abs(n)>p/2)?a.flexAnimate(i,a.vars.pauseOnAction):v||a.flexAnimate(a.currentSlide,a.vars.pauseOnAction,!0)}e.removeEventListener("touchend",S,!1),r=null,o=null,m=null,l=null},e.addEventListener("touchstart",g,!1))},resize:function(){!a.animating&&a.is(":visible")&&(u||a.doMath(),v?m.smoothHeight():u?(a.slides.width(a.computedW),a.update(a.pagingCount),a.setProps()):c?(a.viewport.height(a.h),a.setProps(a.h,"setTotal")):(a.vars.smoothHeight&&m.smoothHeight(),a.newSlides.width(a.computedW),a.setProps(a.computedW,"setTotal")))},smoothHeight:function(e){if(!c||v){var t=v?a:a.viewport;e?t.animate({height:a.slides.eq(a.animatingTo).height()},e):t.height(a.slides.eq(a.animatingTo).height())}},sync:function(e){var t=$(a.vars.sync).data("flexslider"),n=a.animatingTo;switch(e){case"animate":t.flexAnimate(n,a.vars.pauseOnAction,!1,!0);break;case"play":t.playing||t.asNav||t.play();break;case"pause":t.pause()}},uniqueID:function(e){return e.filter("[id]").add(e.find("[id]")).each(function(){var e=$(this);e.attr("id",e.attr("id")+"_clone")}),e},pauseInvisible:{visProp:null,init:function(){var e=m.pauseInvisible.getHiddenProp();if(e){var t=e.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(t,function(){m.pauseInvisible.isHidden()?a.startTimeout?clearTimeout(a.startTimeout):a.pause():a.started?a.play():a.vars.initDelay>0?setTimeout(a.play,a.vars.initDelay):a.play()})}},isHidden:function(){var e=m.pauseInvisible.getHiddenProp();return e?document[e]:!1},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(l),l=setTimeout(function(){o=""},3e3)}},a.flexAnimate=function(e,t,i,r,o){if(a.vars.animationLoop||e===a.currentSlide||(a.direction=e>a.currentSlide?"next":"prev"),p&&1===a.pagingCount&&(a.direction=a.currentItem<e?"next":"prev"),!a.animating&&(a.canAdvance(e,o)||i)&&a.is(":visible")){if(p&&r){var l=$(a.vars.asNavFor).data("flexslider");if(a.atEnd=0===e||e===a.count-1,l.flexAnimate(e,!0,!1,!0,o),a.direction=a.currentItem<e?"next":"prev",l.direction=a.direction,Math.ceil((e+1)/a.visible)-1===a.currentSlide||0===e)return a.currentItem=e,a.slides.removeClass(n+"active-slide").eq(e).addClass(n+"active-slide"),!1;a.currentItem=e,a.slides.removeClass(n+"active-slide").eq(e).addClass(n+"active-slide"),e=Math.floor(e/a.visible)}if(a.animating=!0,a.animatingTo=e,t&&a.pause(),a.vars.before(a),a.syncExists&&!o&&m.sync("animate"),a.vars.controlNav&&m.controlNav.active(),u||a.slides.removeClass(n+"active-slide").eq(e).addClass(n+"active-slide"),a.atEnd=0===e||e===a.last,a.vars.directionNav&&m.directionNav.update(),e===a.last&&(a.vars.end(a),a.vars.animationLoop||a.pause()),v)s?(a.slides.eq(a.currentSlide).css({opacity:0,zIndex:1}),a.slides.eq(e).css({opacity:1,zIndex:2}),a.wrapup(f)):(a.slides.eq(a.currentSlide).css({zIndex:1}).animate({opacity:0},a.vars.animationSpeed,a.vars.easing),a.slides.eq(e).css({zIndex:2}).animate({opacity:1},a.vars.animationSpeed,a.vars.easing,a.wrapup));else{var f=c?a.slides.filter(":first").height():a.computedW,g,h,S;u?(g=a.vars.itemMargin,S=(a.itemW+g)*a.move*a.animatingTo,h=S>a.limit&&1!==a.visible?a.limit:S):h=0===a.currentSlide&&e===a.count-1&&a.vars.animationLoop&&"next"!==a.direction?d?(a.count+a.cloneOffset)*f:0:a.currentSlide===a.last&&0===e&&a.vars.animationLoop&&"prev"!==a.direction?d?0:(a.count+1)*f:d?(a.count-1-e+a.cloneOffset)*f:(e+a.cloneOffset)*f,a.setProps(h,"",a.vars.animationSpeed),a.transitions?(a.vars.animationLoop&&a.atEnd||(a.animating=!1,a.currentSlide=a.animatingTo),a.container.unbind("webkitTransitionEnd transitionend"),a.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(a.ensureAnimationEnd),a.wrapup(f)}),clearTimeout(a.ensureAnimationEnd),a.ensureAnimationEnd=setTimeout(function(){a.wrapup(f)},a.vars.animationSpeed+100)):a.container.animate(a.args,a.vars.animationSpeed,a.vars.easing,function(){a.wrapup(f)})}a.vars.smoothHeight&&m.smoothHeight(a.vars.animationSpeed)}},a.wrapup=function(e){v||u||(0===a.currentSlide&&a.animatingTo===a.last&&a.vars.animationLoop?a.setProps(e,"jumpEnd"):a.currentSlide===a.last&&0===a.animatingTo&&a.vars.animationLoop&&a.setProps(e,"jumpStart")),a.animating=!1,a.currentSlide=a.animatingTo,a.vars.after(a)},a.animateSlides=function(){!a.animating&&f&&a.flexAnimate(a.getTarget("next"))},a.pause=function(){clearInterval(a.animatedSlides),a.animatedSlides=null,a.playing=!1,a.vars.pausePlay&&m.pausePlay.update("play"),a.syncExists&&m.sync("pause")},a.play=function(){a.playing&&clearInterval(a.animatedSlides),a.animatedSlides=a.animatedSlides||setInterval(a.animateSlides,a.vars.slideshowSpeed),a.started=a.playing=!0,a.vars.pausePlay&&m.pausePlay.update("pause"),a.syncExists&&m.sync("play")},a.stop=function(){a.pause(),a.stopped=!0},a.canAdvance=function(e,t){var n=p?a.pagingCount-1:a.last;return t?!0:p&&a.currentItem===a.count-1&&0===e&&"prev"===a.direction?!0:p&&0===a.currentItem&&e===a.pagingCount-1&&"next"!==a.direction?!1:e!==a.currentSlide||p?a.vars.animationLoop?!0:a.atEnd&&0===a.currentSlide&&e===n&&"next"!==a.direction?!1:a.atEnd&&a.currentSlide===n&&0===e&&"next"===a.direction?!1:!0:!1},a.getTarget=function(e){return a.direction=e,"next"===e?a.currentSlide===a.last?0:a.currentSlide+1:0===a.currentSlide?a.last:a.currentSlide-1},a.setProps=function(e,t,n){var i=function(){var n=e?e:(a.itemW+a.vars.itemMargin)*a.move*a.animatingTo,i=function(){if(u)return"setTouch"===t?e:d&&a.animatingTo===a.last?0:d?a.limit-(a.itemW+a.vars.itemMargin)*a.move*a.animatingTo:a.animatingTo===a.last?a.limit:n;switch(t){case"setTotal":return d?(a.count-1-a.currentSlide+a.cloneOffset)*e:(a.currentSlide+a.cloneOffset)*e;case"setTouch":return d?e:e;case"jumpEnd":return d?e:a.count*e;case"jumpStart":return d?a.count*e:e;default:return e}}();return-1*i+"px"}();a.transitions&&(i=c?"translate3d(0,"+i+",0)":"translate3d("+i+",0,0)",n=void 0!==n?n/1e3+"s":"0s",a.container.css("-"+a.pfx+"-transition-duration",n),a.container.css("transition-duration",n)),a.args[a.prop]=i,(a.transitions||void 0===n)&&a.container.css(a.args),a.container.css("transform",i)},a.setup=function(e){if(v)a.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===e&&(s?a.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+a.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(a.currentSlide).css({opacity:1,zIndex:2}):0==a.vars.fadeFirstSlide?a.slides.css({opacity:0,display:"block",zIndex:1}).eq(a.currentSlide).css({zIndex:2}).css({opacity:1}):a.slides.css({opacity:0,display:"block",zIndex:1}).eq(a.currentSlide).css({zIndex:2}).animate({opacity:1},a.vars.animationSpeed,a.vars.easing)),a.vars.smoothHeight&&m.smoothHeight();else{var t,i;"init"===e&&(a.viewport=$('<div class="'+n+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(a).append(a.container),a.cloneCount=0,a.cloneOffset=0,d&&(i=$.makeArray(a.slides).reverse(),a.slides=$(i),a.container.empty().append(a.slides))),a.vars.animationLoop&&!u&&(a.cloneCount=2,a.cloneOffset=1,"init"!==e&&a.container.find(".clone").remove(),a.container.append(m.uniqueID(a.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(m.uniqueID(a.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),a.newSlides=$(a.vars.selector,a),t=d?a.count-1-a.currentSlide+a.cloneOffset:a.currentSlide+a.cloneOffset,c&&!u?(a.container.height(200*(a.count+a.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){a.newSlides.css({display:"block"}),a.doMath(),a.viewport.height(a.h),a.setProps(t*a.h,"init")},"init"===e?100:0)):(a.container.width(200*(a.count+a.cloneCount)+"%"),a.setProps(t*a.computedW,"init"),setTimeout(function(){a.doMath(),a.newSlides.css({width:a.computedW,"float":"left",display:"block"}),a.vars.smoothHeight&&m.smoothHeight()},"init"===e?100:0))}u||a.slides.removeClass(n+"active-slide").eq(a.currentSlide).addClass(n+"active-slide"),a.vars.init(a)},a.doMath=function(){var e=a.slides.first(),t=a.vars.itemMargin,n=a.vars.minItems,i=a.vars.maxItems;a.w=void 0===a.viewport?a.width():a.viewport.width(),a.h=e.height(),a.boxPadding=e.outerWidth()-e.width(),u?(a.itemT=a.vars.itemWidth+t,a.minW=n?n*a.itemT:a.w,a.maxW=i?i*a.itemT-t:a.w,a.itemW=a.minW>a.w?(a.w-t*(n-1))/n:a.maxW<a.w?(a.w-t*(i-1))/i:a.vars.itemWidth>a.w?a.w:a.vars.itemWidth,a.visible=Math.floor(a.w/a.itemW),a.move=a.vars.move>0&&a.vars.move<a.visible?a.vars.move:a.visible,a.pagingCount=Math.ceil((a.count-a.visible)/a.move+1),a.last=a.pagingCount-1,a.limit=1===a.pagingCount?0:a.vars.itemWidth>a.w?a.itemW*(a.count-1)+t*(a.count-1):(a.itemW+t)*a.count-a.w-t):(a.itemW=a.w,a.pagingCount=a.count,a.last=a.count-1),a.computedW=a.itemW-a.boxPadding},a.update=function(e,t){a.doMath(),u||(e<a.currentSlide?a.currentSlide+=1:e<=a.currentSlide&&0!==e&&(a.currentSlide-=1),a.animatingTo=a.currentSlide),a.vars.controlNav&&!a.manualControls&&("add"===t&&!u||a.pagingCount>a.controlNav.length?m.controlNav.update("add"):("remove"===t&&!u||a.pagingCount<a.controlNav.length)&&(u&&a.currentSlide>a.last&&(a.currentSlide-=1,a.animatingTo-=1),m.controlNav.update("remove",a.last))),a.vars.directionNav&&m.directionNav.update()},a.addSlide=function(e,t){var n=$(e);a.count+=1,a.last=a.count-1,c&&d?void 0!==t?a.slides.eq(a.count-t).after(n):a.container.prepend(n):void 0!==t?a.slides.eq(t).before(n):a.container.append(n),a.update(t,"add"),a.slides=$(a.vars.selector+":not(.clone)",a),a.setup(),a.vars.added(a)},a.removeSlide=function(e){var t=isNaN(e)?a.slides.index($(e)):e;a.count-=1,a.last=a.count-1,isNaN(e)?$(e,a.slides).remove():c&&d?a.slides.eq(a.last).remove():a.slides.eq(e).remove(),a.doMath(),a.update(t,"remove"),a.slides=$(a.vars.selector+":not(.clone)",a),a.setup(),a.vars.removed(a)},m.init()},$(window).blur(function(e){focused=!1}).focus(function(e){focused=!0}),$.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},$.fn.flexslider=function(e){if(void 0===e&&(e={}),"object"==typeof e)return this.each(function(){var t=$(this),a=e.selector?e.selector:".slides > li",n=t.find(a);1===n.length&&e.allowOneSlide===!0||0===n.length?(n.fadeIn(400),e.start&&e.start(t)):void 0===t.data("flexslider")&&new $.flexslider(this,e)});var t=$(this).data("flexslider");switch(e){case"play":t.play();break;case"pause":t.pause();break;case"stop":t.stop();break;case"next":t.flexAnimate(t.getTarget("next"),!0);break;case"prev":case"previous":t.flexAnimate(t.getTarget("prev"),!0);break;default:"number"==typeof e&&t.flexAnimate(e,!0)}}}(jQuery);
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */

(function($) {

var types = ['DOMMouseScroll', 'mousewheel'];

if ($.event.fixHooks) {
    for ( var i=types.length; i; ) {
        $.event.fixHooks[ types[--i] ] = $.event.mouseHooks;
    }
}

$.event.special.mousewheel = {
    setup: function() {
        if ( this.addEventListener ) {
            for ( var i=types.length; i; ) {
                this.addEventListener( types[--i], handler, false );
            }
        } else {
            this.onmousewheel = handler;
        }
    },
    
    teardown: function() {
        if ( this.removeEventListener ) {
            for ( var i=types.length; i; ) {
                this.removeEventListener( types[--i], handler, false );
            }
        } else {
            this.onmousewheel = null;
        }
    }
};

$.fn.extend({
    mousewheel: function(fn) {
        return fn ? this.bind("mousewheel", fn) : this.trigger("mousewheel");
    },
    
    unmousewheel: function(fn) {
        return this.unbind("mousewheel", fn);
    }
});


function handler(event) {
    var orgEvent = event || window.event, args = [].slice.call( arguments, 1 ), delta = 0, returnValue = true, deltaX = 0, deltaY = 0;
    event = $.event.fix(orgEvent);
    event.type = "mousewheel";
    
    // Old school scrollwheel delta
    if ( orgEvent.wheelDelta ) { delta = orgEvent.wheelDelta/120; }
    if ( orgEvent.detail     ) { delta = -orgEvent.detail/3; }
    
    // New school multidimensional scroll (touchpads) deltas
    deltaY = delta;
    
    // Gecko
    if ( orgEvent.axis !== undefined && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {
        deltaY = 0;
        deltaX = -1*delta;
    }
    
    // Webkit
    if ( orgEvent.wheelDeltaY !== undefined ) { deltaY = orgEvent.wheelDeltaY/120; }
    if ( orgEvent.wheelDeltaX !== undefined ) { deltaX = -1*orgEvent.wheelDeltaX/120; }
    
    // Add event and delta to the front of the arguments
    args.unshift(event, delta, deltaX, deltaY);
    
    return ($.event.dispatch || $.event.handle).apply(this, args);
}

})(jQuery);
!function(n,r){"function"==typeof define&&define.amd?define(r):"object"==typeof exports?module.exports=r():n.transformicons=r()}(this||window,function(){"use strict";var n={},r="tcon-transform",t={transform:["click"],revert:["click"]},e=function(n){return"string"==typeof n?Array.prototype.slice.call(document.querySelectorAll(n)):"undefined"==typeof n||n instanceof Array?n:[n]},o=function(n){return"string"==typeof n?n.toLowerCase().split(" "):n},f=function(n,r,f){var c=(f?"remove":"add")+"EventListener",u=e(n),s=u.length,a={};for(var l in t)a[l]=r&&r[l]?o(r[l]):t[l];for(;s--;)for(var d in a)for(var v=a[d].length;v--;)u[s][c](a[d][v],i)},i=function(r){n.toggle(r.currentTarget)};return n.add=function(r,t){return f(r,t),n},n.remove=function(r,t){return f(r,t,!0),n},n.transform=function(t){return e(t).forEach(function(n){n.classList.add(r)}),n},n.revert=function(t){return e(t).forEach(function(n){n.classList.remove(r)}),n},n.toggle=function(t){return e(t).forEach(function(t){n[t.classList.contains(r)?"revert":"transform"](t)}),n},n});
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var scrollIt = require('./modules/scrollIt');
var contactForm = require('./modules/contactForm');



scrollIt();
contactForm();


( function($) {


	$(document).ready(function() {

				
		// transformicon
		var spinner = $('.tcon-loader--spinner360');

		/* NAVIGATION */


		
		// $(function(){
		// 	$.scrollIt({
		// 		topOffset: -75 
		// 	});
		// }); 



		var breakpoint = '1000px';

		var $sections = $('.section');
		var $navLinks = $('.site_header a');
		var $site_header = $('.site_header');
		var pt = {
			inClass: 'fadeIn',
			outClass: '',
			isAnimating: false
		};


	    var media_query = window.matchMedia("(min-width: 1000px)");
	    media_query.addListener(funWrapper);
	    funWrapper(media_query);


	    function funWrapper(media_query) {
	      if (media_query.matches) {
	        animatePageTransitions();
	        heroDownLink();
	      } else {
	        // turn event handlers off
	        $('.site_header').off();
	        $('#down-link').off();
	        // TODO animate scroll to sections     
	      }
	    }    		


		function animatePageTransitions() {

			$('.site_header').on('click', 'a', function(e) {

				e.preventDefault();

				$('body').addClass('init');

				var $this = $(this),
					$activeSec = $sections.filter('.active'),
					targetHref = $this.attr('href'),
					$targetSec = $sections.filter(targetHref);

				if ( $this.hasClass('on') || pt.isAnimating ) {
					return false;
				}

				$navLinks.removeClass('on');
				$this.addClass('on');

				// enable scroll bar on mobile on long pages
				$('body').removeClass('scroll');


				// set header class to determin background and color
				if( targetHref === '#about' ) {

					$('body').addClass('scroll');

					$site_header.addClass('show-bgc');
					
				} 

				else if ( targetHref === '#gallery' ) {
					
					$site_header.removeClass('show-bgc');
					
				} else if ( targetHref === '#contact' ) {

					$('body').addClass('scroll');
					
					$site_header.addClass('show-bgc');
					
				} else if ( targetHref === '#hero' ) {
					
					$site_header.removeClass('show-bgc');
					
				}			



				if (targetHref === '#gallery') {
					pt.outClass = 'moveToTop';
					pt.inClass = 'moveFromBottom';
				} else {
					pt.outClass = 'moveToRightFade';
					pt.inClass = 'fadeIn';
				}		
			


				$sections.not($activeSec).removeClass('active');

				$activeSec.addClass(pt.outClass + ' isAnimating');

				pt.isAnimating = true;

				$targetSec.addClass(pt.inClass + ' active');

				setTimeout(function() {
					$activeSec.removeClass( pt.outClass + ' active isAnimating');
					$targetSec.removeClass( pt.inClass );
					pt.isAnimating = false;
				}, 700);
						
			});

		}
		

		function heroDownLink() {
			$('#down-link').on('click', function(e) {
				e.preventDefault();
				$('body').addClass('init');
				$('#gallery-link').trigger('click');
			});
		}
		















		/* SLIDES */

		$('.flexslider').flexslider({
			animation: "fade",
			slideshow: false,
			controlsContainer: $(".custom-controls-container"),
			customDirectionNav: $(".custom-navigation a"),
			start: function(slider){
			  $('body').removeClass('loading');
			}
		});



		
		/* HOMEPAGE LOADING */


		function clearOverlay() {
			$('.home-overlay').fadeOut(3000);
		}

		function showHeader() {
			// $('.site_header').show();
			$('#down-link').addClass('on');
		}
		setTimeout(clearOverlay, 1400);
		setTimeout(showHeader, 1400);















		/* Cards */
		card = {};
		var dimmer = $('.dimmer');
		var cardContainer = $('.Card__container');



		/* isolate one panel and remove it's tint on load */
		function returnTint() {
			$('.Card__front--tint').each(function () {
			    $(this).removeClass('on');
			});
		}

		function removeTint() {
			$('.Card--4 .Card__front--tint').addClass('on');
		}


		$(cardContainer).hover(
			function() {
				if (!card.isOpen) {
					returnTint();
				}

			}, function() {
				if (!card.isOpen) {
					removeTint();
				} 
			}
		);		





		
		$('.Card').on('click', function(event) {

			var $this = $(this);

			card.isOpen = true;

			event.stopPropagation();

			$(this)
				.removeClass('return')
				.addClass('moveToCenter flipped');

			window.x = $(window).width() / 2;
		    window.y = $(window).height() / 2;
			
			var el = this;	

			if (el.getBoundingClientRect) {       

				var rect = el.getBoundingClientRect();
				card.x = rect.left;
				card.y = rect.top;
				card.w = rect.right - rect.left;
				card.h = rect.bottom - rect.top;
				// console.log(" Left: " + card.x + "\n Top: " + card.y + "\n Width: " + card.w + "\n Height: " + card.h);

				var leftTarget = window.x - (card.x + ( card.w / 2 )),
					topTarget = window.y - (card.y + ( card.h / 2 ));

				// prevent flipper card from getting too high and disapearing behind the header
				if (window.y < 320) {

					topTarget = 320 - (card.y + ( card.h / 2 ));
				}

				var	transformValue = 'translate(' + leftTarget + 'px, ' + topTarget + 'px)';


				var styles = {
				  'transform' : transformValue,
				  '-webkit-transform': transformValue
				};

				$(this).css(styles);

				dimmer
					.addClass('dimmed')
					.css('z-index', '3');

				cardContainer
					.css('z-index', 'auto');


			} else {
				alert ("Your browser does not support this example!");
			}
		
			
		});














		$('.Card__closeBtn').on('click', function(event) {

			event.stopPropagation();

			var $thisCard = $(this).closest('.Card'),			
				transformValue = 'translate(0, 0)',
				styles = {
					'transform' : transformValue,
					'-webkit-transform': transformValue
				};			

			$thisCard.css(styles);

			dimmer.removeClass('dimmed');

			$thisCard
				.removeClass('moveToCenter')
				.addClass('return');

			// delay to allow for css transition 
			setTimeout(function() {
				dimmer.css('z-index', '1');
				cardContainer.css('z-index', '2');
				$thisCard.removeClass('return flipped');
				card.isOpen = false;
			}, 500);

			$('.Card').each(function () {
			    $(this).removeAttr('style');
			});			
		});
























	
	$('.modal').on('click', function() {
		$('.Contact__box').addClass('activated');
		$('.contact-tint').addClass('active');
		$('.Contact__main').addClass('deactivate');
	});
	
	$('.Contact__closeBtn').on('click', function(event) {
		$('.Contact__box').removeClass('activated');
		$('.contact-tint').removeClass('active');
		$('.Contact__main').removeClass('deactivate');
	});


















	});

})(jQuery);
},{"./modules/contactForm":2,"./modules/scrollIt":3}],2:[function(require,module,exports){
module.exports = function contactForm() {

	/* CONTACT */
	$(function() {

		console.log('hello');
		// Get the form.
		var form = $('#ajax-contact');

		// Get the messages div.
		var formMessages = $('#form-messages');

		// Set up an event listener for the contact form.
		$(form).submit(function(e) {
			// Stop the browser from submitting the form.
			e.preventDefault();

			// display the spinner
			spinner.css('display', 'block');

			// Serialize the form data.
			var formData = $(form).serialize();

			// Submit the form using AJAX.
			$.ajax({
				type: 'POST',
				url: $(form).attr('action'),
				data: formData
			})
			.done(function(response) {
				// Make sure that the formMessages div has the 'success' class.
				$(formMessages).removeClass('error');
				$(formMessages).addClass('success');

				// hide the spinner
				spinner.css('display', 'none');

				// Set the message text.
				// $(formMessages).text(response); // response = server details
				$(formMessages).text('Thanks! Your message has been recieved.');


				// Clear the form.
				$('#name').val('');
				$('#email').val('');
				$('#message').val('');
			})
			.fail(function(data) {
				// Make sure that the formMessages div has the 'error' class.
				$(formMessages).removeClass('success');
				$(formMessages).addClass('error');

				// Set the message text.
				if (data.responseText !== '') {
					$(formMessages).text(data.responseText);
				} else {
					$(formMessages).text('Oops! An error occured and your message could not be sent.');
				}
			});

		});

	});

};
},{}],3:[function(require,module,exports){
module.exports = function scrollIt() {



/**
 * ScrollIt
 * ScrollIt.js(scroll•it•dot•js) makes it easy to make long, vertically scrolling pages.
 *
 * Latest version: https://github.com/cmpolis/scrollIt.js
 *
 * License <https://github.com/cmpolis/scrollIt.js/blob/master/LICENSE.txt>
 */
(function($) {
    'use strict';

    var pluginName = 'ScrollIt',
        pluginVersion = '1.0.3';

    /*
     * OPTIONS
     */
    var defaults = {
        upKey: 38,
        downKey: 40,
        easing: 'linear',
        scrollTime: 600,
        activeClass: 'active',
        onPageChange: null,
        topOffset : { val: 0}
    };

    var listeners = {
        scroll : null,
        keydown: null,
        click: null,
    };


    $.scrollIt = function(options) {

        /*
         * DECLARATIONS
         */
        var settings = $.extend(defaults, options),
            active = 0,
            lastIndex = $('[data-scroll-index]:last').attr('data-scroll-index');

        /*
         * METHODS
         */

        /**
         * navigate
         *
         * sets up navigation animation
         */
        var navigate = function(ndx) {
            if(ndx < 0 || ndx > lastIndex) return;

            var targetTop = $('[data-scroll-index=' + ndx + ']').offset().top + settings.topOffset.val + 1;
            $('html,body').animate({
                scrollTop: targetTop,
                easing: settings.easing
            }, settings.scrollTime);
        };

        /**
         * doScroll
         *
         * runs navigation() when criteria are met
         */
        var doScroll = function (e) {
            var target = $(e.target).closest("[data-scroll-nav]").attr('data-scroll-nav') ||
            $(e.target).closest("[data-scroll-goto]").attr('data-scroll-goto');
            navigate(parseInt(target, 10));
        };

        /**
         * keyNavigation
         *
         * sets up keyboard navigation behavior
         */
        var keyNavigation = function (e) {
            var key = e.which;
            if($('html,body').is(':animated') && (key == settings.upKey || key == settings.downKey)) {
                return false;
            }
            if(key == settings.upKey && active > 0) {
                navigate(parseInt(active, 10) - 1);
                return false;
            } else if(key == settings.downKey && active < lastIndex) {
                navigate(parseInt(active, 10) + 1);
                return false;
            }
            return true;
        };

        /**
         * updateActive
         *
         * sets the currently active item
         */
        var updateActive = function(ndx) {
            if(settings.onPageChange && ndx && (active != ndx)) settings.onPageChange(ndx);

            active = ndx;
            $('[data-scroll-nav]').removeClass(settings.activeClass);
            $('[data-scroll-nav=' + ndx + ']').addClass(settings.activeClass);
        };

        /**
         * watchActive
         *
         * watches currently active item and updates accordingly
         */
        var watchActive = function() {
            var winTop = $(window).scrollTop();

            var visible = $('[data-scroll-index]').filter(function(ndx, div) {
                return winTop >= $(div).offset().top + settings.topOffset.val &&
                winTop < $(div).offset().top + (settings.topOffset.val) + $(div).outerHeight();
            });
            var newActive = visible.first().attr('data-scroll-index');
            updateActive(newActive);
        };

        /*
         * runs methods
         */
        $(window).on('scroll',watchActive).scroll();

        $(window).on('keydown', keyNavigation);

        var clickHandler = function(e){
            e.preventDefault();
            doScroll(e);
        };

        $('body').on('click','[data-scroll-nav], [data-scroll-goto]', clickHandler);

        listeners.scroll = watchActive;
        listeners.keydown = keyNavigation;
        listeners.click = clickHandler;
    };

    $.scrollIt.listeners = listeners;

    $.scrollIt.destroy = function () {
        $(window).off('scroll', listeners.scroll);
        $(window).off('keydown', listeners.keydown);
        $('body').off('click','[data-scroll-nav], [data-scroll-goto]', listeners.click);
    };











    var mQuery = window.matchMedia("(max-width: 1000px)");
    mQuery.addListener(my_function);
    my_function(mQuery);

    var topOffset = {
      val: -70
    };

    function my_function(mQuery) {
      if (mQuery.matches) {
        $('body').addClass('sm-screen');
        $.scrollIt({
             topOffset : topOffset
        });

      } else {
        $('body').removeClass('sm-screen');
        $.scrollIt.destroy();
      }
    } 





}(jQuery));



};
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvYXBwL2VudHJ5Iiwic3JjL2pzL2FwcC9tb2R1bGVzL2NvbnRhY3RGb3JtLmpzIiwic3JjL2pzL2FwcC9tb2R1bGVzL3Njcm9sbEl0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIHNjcm9sbEl0ID0gcmVxdWlyZSgnLi9tb2R1bGVzL3Njcm9sbEl0Jyk7XG52YXIgY29udGFjdEZvcm0gPSByZXF1aXJlKCcuL21vZHVsZXMvY29udGFjdEZvcm0nKTtcblxuXG5cbnNjcm9sbEl0KCk7XG5jb250YWN0Rm9ybSgpO1xuXG5cbiggZnVuY3Rpb24oJCkge1xuXG5cblx0JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XG5cdFx0Ly8gdHJhbnNmb3JtaWNvblxuXHRcdHZhciBzcGlubmVyID0gJCgnLnRjb24tbG9hZGVyLS1zcGlubmVyMzYwJyk7XG5cblx0XHQvKiBOQVZJR0FUSU9OICovXG5cblxuXHRcdFxuXHRcdC8vICQoZnVuY3Rpb24oKXtcblx0XHQvLyBcdCQuc2Nyb2xsSXQoe1xuXHRcdC8vIFx0XHR0b3BPZmZzZXQ6IC03NSBcblx0XHQvLyBcdH0pO1xuXHRcdC8vIH0pOyBcblxuXG5cblx0XHR2YXIgYnJlYWtwb2ludCA9ICcxMDAwcHgnO1xuXG5cdFx0dmFyICRzZWN0aW9ucyA9ICQoJy5zZWN0aW9uJyk7XG5cdFx0dmFyICRuYXZMaW5rcyA9ICQoJy5zaXRlX2hlYWRlciBhJyk7XG5cdFx0dmFyICRzaXRlX2hlYWRlciA9ICQoJy5zaXRlX2hlYWRlcicpO1xuXHRcdHZhciBwdCA9IHtcblx0XHRcdGluQ2xhc3M6ICdmYWRlSW4nLFxuXHRcdFx0b3V0Q2xhc3M6ICcnLFxuXHRcdFx0aXNBbmltYXRpbmc6IGZhbHNlXG5cdFx0fTtcblxuXG5cdCAgICB2YXIgbWVkaWFfcXVlcnkgPSB3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDEwMDBweClcIik7XG5cdCAgICBtZWRpYV9xdWVyeS5hZGRMaXN0ZW5lcihmdW5XcmFwcGVyKTtcblx0ICAgIGZ1bldyYXBwZXIobWVkaWFfcXVlcnkpO1xuXG5cblx0ICAgIGZ1bmN0aW9uIGZ1bldyYXBwZXIobWVkaWFfcXVlcnkpIHtcblx0ICAgICAgaWYgKG1lZGlhX3F1ZXJ5Lm1hdGNoZXMpIHtcblx0ICAgICAgICBhbmltYXRlUGFnZVRyYW5zaXRpb25zKCk7XG5cdCAgICAgICAgaGVyb0Rvd25MaW5rKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gdHVybiBldmVudCBoYW5kbGVycyBvZmZcblx0ICAgICAgICAkKCcuc2l0ZV9oZWFkZXInKS5vZmYoKTtcblx0ICAgICAgICAkKCcjZG93bi1saW5rJykub2ZmKCk7XG5cdCAgICAgICAgLy8gVE9ETyBhbmltYXRlIHNjcm9sbCB0byBzZWN0aW9ucyAgICAgXG5cdCAgICAgIH1cblx0ICAgIH0gICAgXHRcdFxuXG5cblx0XHRmdW5jdGlvbiBhbmltYXRlUGFnZVRyYW5zaXRpb25zKCkge1xuXG5cdFx0XHQkKCcuc2l0ZV9oZWFkZXInKS5vbignY2xpY2snLCAnYScsIGZ1bmN0aW9uKGUpIHtcblxuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0JCgnYm9keScpLmFkZENsYXNzKCdpbml0Jyk7XG5cblx0XHRcdFx0dmFyICR0aGlzID0gJCh0aGlzKSxcblx0XHRcdFx0XHQkYWN0aXZlU2VjID0gJHNlY3Rpb25zLmZpbHRlcignLmFjdGl2ZScpLFxuXHRcdFx0XHRcdHRhcmdldEhyZWYgPSAkdGhpcy5hdHRyKCdocmVmJyksXG5cdFx0XHRcdFx0JHRhcmdldFNlYyA9ICRzZWN0aW9ucy5maWx0ZXIodGFyZ2V0SHJlZik7XG5cblx0XHRcdFx0aWYgKCAkdGhpcy5oYXNDbGFzcygnb24nKSB8fCBwdC5pc0FuaW1hdGluZyApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQkbmF2TGlua3MucmVtb3ZlQ2xhc3MoJ29uJyk7XG5cdFx0XHRcdCR0aGlzLmFkZENsYXNzKCdvbicpO1xuXG5cdFx0XHRcdC8vIGVuYWJsZSBzY3JvbGwgYmFyIG9uIG1vYmlsZSBvbiBsb25nIHBhZ2VzXG5cdFx0XHRcdCQoJ2JvZHknKS5yZW1vdmVDbGFzcygnc2Nyb2xsJyk7XG5cblxuXHRcdFx0XHQvLyBzZXQgaGVhZGVyIGNsYXNzIHRvIGRldGVybWluIGJhY2tncm91bmQgYW5kIGNvbG9yXG5cdFx0XHRcdGlmKCB0YXJnZXRIcmVmID09PSAnI2Fib3V0JyApIHtcblxuXHRcdFx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcygnc2Nyb2xsJyk7XG5cblx0XHRcdFx0XHQkc2l0ZV9oZWFkZXIuYWRkQ2xhc3MoJ3Nob3ctYmdjJyk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdH0gXG5cblx0XHRcdFx0ZWxzZSBpZiAoIHRhcmdldEhyZWYgPT09ICcjZ2FsbGVyeScgKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0JHNpdGVfaGVhZGVyLnJlbW92ZUNsYXNzKCdzaG93LWJnYycpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHR9IGVsc2UgaWYgKCB0YXJnZXRIcmVmID09PSAnI2NvbnRhY3QnICkge1xuXG5cdFx0XHRcdFx0JCgnYm9keScpLmFkZENsYXNzKCdzY3JvbGwnKTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHQkc2l0ZV9oZWFkZXIuYWRkQ2xhc3MoJ3Nob3ctYmdjJyk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdH0gZWxzZSBpZiAoIHRhcmdldEhyZWYgPT09ICcjaGVybycgKSB7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0JHNpdGVfaGVhZGVyLnJlbW92ZUNsYXNzKCdzaG93LWJnYycpO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHR9XHRcdFx0XG5cblxuXG5cdFx0XHRcdGlmICh0YXJnZXRIcmVmID09PSAnI2dhbGxlcnknKSB7XG5cdFx0XHRcdFx0cHQub3V0Q2xhc3MgPSAnbW92ZVRvVG9wJztcblx0XHRcdFx0XHRwdC5pbkNsYXNzID0gJ21vdmVGcm9tQm90dG9tJztcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRwdC5vdXRDbGFzcyA9ICdtb3ZlVG9SaWdodEZhZGUnO1xuXHRcdFx0XHRcdHB0LmluQ2xhc3MgPSAnZmFkZUluJztcblx0XHRcdFx0fVx0XHRcblx0XHRcdFxuXG5cblx0XHRcdFx0JHNlY3Rpb25zLm5vdCgkYWN0aXZlU2VjKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cblx0XHRcdFx0JGFjdGl2ZVNlYy5hZGRDbGFzcyhwdC5vdXRDbGFzcyArICcgaXNBbmltYXRpbmcnKTtcblxuXHRcdFx0XHRwdC5pc0FuaW1hdGluZyA9IHRydWU7XG5cblx0XHRcdFx0JHRhcmdldFNlYy5hZGRDbGFzcyhwdC5pbkNsYXNzICsgJyBhY3RpdmUnKTtcblxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdCRhY3RpdmVTZWMucmVtb3ZlQ2xhc3MoIHB0Lm91dENsYXNzICsgJyBhY3RpdmUgaXNBbmltYXRpbmcnKTtcblx0XHRcdFx0XHQkdGFyZ2V0U2VjLnJlbW92ZUNsYXNzKCBwdC5pbkNsYXNzICk7XG5cdFx0XHRcdFx0cHQuaXNBbmltYXRpbmcgPSBmYWxzZTtcblx0XHRcdFx0fSwgNzAwKTtcblx0XHRcdFx0XHRcdFxuXHRcdFx0fSk7XG5cblx0XHR9XG5cdFx0XG5cblx0XHRmdW5jdGlvbiBoZXJvRG93bkxpbmsoKSB7XG5cdFx0XHQkKCcjZG93bi1saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdCQoJ2JvZHknKS5hZGRDbGFzcygnaW5pdCcpO1xuXHRcdFx0XHQkKCcjZ2FsbGVyeS1saW5rJykudHJpZ2dlcignY2xpY2snKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblx0XHQvKiBTTElERVMgKi9cblxuXHRcdCQoJy5mbGV4c2xpZGVyJykuZmxleHNsaWRlcih7XG5cdFx0XHRhbmltYXRpb246IFwiZmFkZVwiLFxuXHRcdFx0c2xpZGVzaG93OiBmYWxzZSxcblx0XHRcdGNvbnRyb2xzQ29udGFpbmVyOiAkKFwiLmN1c3RvbS1jb250cm9scy1jb250YWluZXJcIiksXG5cdFx0XHRjdXN0b21EaXJlY3Rpb25OYXY6ICQoXCIuY3VzdG9tLW5hdmlnYXRpb24gYVwiKSxcblx0XHRcdHN0YXJ0OiBmdW5jdGlvbihzbGlkZXIpe1xuXHRcdFx0ICAkKCdib2R5JykucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXG5cblx0XHRcblx0XHQvKiBIT01FUEFHRSBMT0FESU5HICovXG5cblxuXHRcdGZ1bmN0aW9uIGNsZWFyT3ZlcmxheSgpIHtcblx0XHRcdCQoJy5ob21lLW92ZXJsYXknKS5mYWRlT3V0KDMwMDApO1xuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHNob3dIZWFkZXIoKSB7XG5cdFx0XHQvLyAkKCcuc2l0ZV9oZWFkZXInKS5zaG93KCk7XG5cdFx0XHQkKCcjZG93bi1saW5rJykuYWRkQ2xhc3MoJ29uJyk7XG5cdFx0fVxuXHRcdHNldFRpbWVvdXQoY2xlYXJPdmVybGF5LCAxNDAwKTtcblx0XHRzZXRUaW1lb3V0KHNob3dIZWFkZXIsIDE0MDApO1xuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXHRcdC8qIENhcmRzICovXG5cdFx0Y2FyZCA9IHt9O1xuXHRcdHZhciBkaW1tZXIgPSAkKCcuZGltbWVyJyk7XG5cdFx0dmFyIGNhcmRDb250YWluZXIgPSAkKCcuQ2FyZF9fY29udGFpbmVyJyk7XG5cblxuXG5cdFx0LyogaXNvbGF0ZSBvbmUgcGFuZWwgYW5kIHJlbW92ZSBpdCdzIHRpbnQgb24gbG9hZCAqL1xuXHRcdGZ1bmN0aW9uIHJldHVyblRpbnQoKSB7XG5cdFx0XHQkKCcuQ2FyZF9fZnJvbnQtLXRpbnQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdCAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdvbicpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0ZnVuY3Rpb24gcmVtb3ZlVGludCgpIHtcblx0XHRcdCQoJy5DYXJkLS00IC5DYXJkX19mcm9udC0tdGludCcpLmFkZENsYXNzKCdvbicpO1xuXHRcdH1cblxuXG5cdFx0JChjYXJkQ29udGFpbmVyKS5ob3Zlcihcblx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIWNhcmQuaXNPcGVuKSB7XG5cdFx0XHRcdFx0cmV0dXJuVGludCgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH0sIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIWNhcmQuaXNPcGVuKSB7XG5cdFx0XHRcdFx0cmVtb3ZlVGludCgpO1xuXHRcdFx0XHR9IFxuXHRcdFx0fVxuXHRcdCk7XHRcdFxuXG5cblxuXG5cblx0XHRcblx0XHQkKCcuQ2FyZCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cblx0XHRcdHZhciAkdGhpcyA9ICQodGhpcyk7XG5cblx0XHRcdGNhcmQuaXNPcGVuID0gdHJ1ZTtcblxuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHRcdCQodGhpcylcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCdyZXR1cm4nKVxuXHRcdFx0XHQuYWRkQ2xhc3MoJ21vdmVUb0NlbnRlciBmbGlwcGVkJyk7XG5cblx0XHRcdHdpbmRvdy54ID0gJCh3aW5kb3cpLndpZHRoKCkgLyAyO1xuXHRcdCAgICB3aW5kb3cueSA9ICQod2luZG93KS5oZWlnaHQoKSAvIDI7XG5cdFx0XHRcblx0XHRcdHZhciBlbCA9IHRoaXM7XHRcblxuXHRcdFx0aWYgKGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCkgeyAgICAgICBcblxuXHRcdFx0XHR2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdFx0XHRjYXJkLnggPSByZWN0LmxlZnQ7XG5cdFx0XHRcdGNhcmQueSA9IHJlY3QudG9wO1xuXHRcdFx0XHRjYXJkLncgPSByZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0O1xuXHRcdFx0XHRjYXJkLmggPSByZWN0LmJvdHRvbSAtIHJlY3QudG9wO1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhcIiBMZWZ0OiBcIiArIGNhcmQueCArIFwiXFxuIFRvcDogXCIgKyBjYXJkLnkgKyBcIlxcbiBXaWR0aDogXCIgKyBjYXJkLncgKyBcIlxcbiBIZWlnaHQ6IFwiICsgY2FyZC5oKTtcblxuXHRcdFx0XHR2YXIgbGVmdFRhcmdldCA9IHdpbmRvdy54IC0gKGNhcmQueCArICggY2FyZC53IC8gMiApKSxcblx0XHRcdFx0XHR0b3BUYXJnZXQgPSB3aW5kb3cueSAtIChjYXJkLnkgKyAoIGNhcmQuaCAvIDIgKSk7XG5cblx0XHRcdFx0Ly8gcHJldmVudCBmbGlwcGVyIGNhcmQgZnJvbSBnZXR0aW5nIHRvbyBoaWdoIGFuZCBkaXNhcGVhcmluZyBiZWhpbmQgdGhlIGhlYWRlclxuXHRcdFx0XHRpZiAod2luZG93LnkgPCAzMjApIHtcblxuXHRcdFx0XHRcdHRvcFRhcmdldCA9IDMyMCAtIChjYXJkLnkgKyAoIGNhcmQuaCAvIDIgKSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXJcdHRyYW5zZm9ybVZhbHVlID0gJ3RyYW5zbGF0ZSgnICsgbGVmdFRhcmdldCArICdweCwgJyArIHRvcFRhcmdldCArICdweCknO1xuXG5cblx0XHRcdFx0dmFyIHN0eWxlcyA9IHtcblx0XHRcdFx0ICAndHJhbnNmb3JtJyA6IHRyYW5zZm9ybVZhbHVlLFxuXHRcdFx0XHQgICctd2Via2l0LXRyYW5zZm9ybSc6IHRyYW5zZm9ybVZhbHVlXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0JCh0aGlzKS5jc3Moc3R5bGVzKTtcblxuXHRcdFx0XHRkaW1tZXJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoJ2RpbW1lZCcpXG5cdFx0XHRcdFx0LmNzcygnei1pbmRleCcsICczJyk7XG5cblx0XHRcdFx0Y2FyZENvbnRhaW5lclxuXHRcdFx0XHRcdC5jc3MoJ3otaW5kZXgnLCAnYXV0bycpO1xuXG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGFsZXJ0IChcIllvdXIgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHRoaXMgZXhhbXBsZSFcIik7XG5cdFx0XHR9XG5cdFx0XG5cdFx0XHRcblx0XHR9KTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cdFx0JCgnLkNhcmRfX2Nsb3NlQnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcblxuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cblx0XHRcdHZhciAkdGhpc0NhcmQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5DYXJkJyksXHRcdFx0XG5cdFx0XHRcdHRyYW5zZm9ybVZhbHVlID0gJ3RyYW5zbGF0ZSgwLCAwKScsXG5cdFx0XHRcdHN0eWxlcyA9IHtcblx0XHRcdFx0XHQndHJhbnNmb3JtJyA6IHRyYW5zZm9ybVZhbHVlLFxuXHRcdFx0XHRcdCctd2Via2l0LXRyYW5zZm9ybSc6IHRyYW5zZm9ybVZhbHVlXG5cdFx0XHRcdH07XHRcdFx0XG5cblx0XHRcdCR0aGlzQ2FyZC5jc3Moc3R5bGVzKTtcblxuXHRcdFx0ZGltbWVyLnJlbW92ZUNsYXNzKCdkaW1tZWQnKTtcblxuXHRcdFx0JHRoaXNDYXJkXG5cdFx0XHRcdC5yZW1vdmVDbGFzcygnbW92ZVRvQ2VudGVyJylcblx0XHRcdFx0LmFkZENsYXNzKCdyZXR1cm4nKTtcblxuXHRcdFx0Ly8gZGVsYXkgdG8gYWxsb3cgZm9yIGNzcyB0cmFuc2l0aW9uIFxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGltbWVyLmNzcygnei1pbmRleCcsICcxJyk7XG5cdFx0XHRcdGNhcmRDb250YWluZXIuY3NzKCd6LWluZGV4JywgJzInKTtcblx0XHRcdFx0JHRoaXNDYXJkLnJlbW92ZUNsYXNzKCdyZXR1cm4gZmxpcHBlZCcpO1xuXHRcdFx0XHRjYXJkLmlzT3BlbiA9IGZhbHNlO1xuXHRcdFx0fSwgNTAwKTtcblxuXHRcdFx0JCgnLkNhcmQnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdCAgICAkKHRoaXMpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG5cdFx0XHR9KTtcdFx0XHRcblx0XHR9KTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblx0XG5cdCQoJy5tb2RhbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xuXHRcdCQoJy5Db250YWN0X19ib3gnKS5hZGRDbGFzcygnYWN0aXZhdGVkJyk7XG5cdFx0JCgnLmNvbnRhY3QtdGludCcpLmFkZENsYXNzKCdhY3RpdmUnKTtcblx0XHQkKCcuQ29udGFjdF9fbWFpbicpLmFkZENsYXNzKCdkZWFjdGl2YXRlJyk7XG5cdH0pO1xuXHRcblx0JCgnLkNvbnRhY3RfX2Nsb3NlQnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHQkKCcuQ29udGFjdF9fYm94JykucmVtb3ZlQ2xhc3MoJ2FjdGl2YXRlZCcpO1xuXHRcdCQoJy5jb250YWN0LXRpbnQnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cdFx0JCgnLkNvbnRhY3RfX21haW4nKS5yZW1vdmVDbGFzcygnZGVhY3RpdmF0ZScpO1xuXHR9KTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblx0fSk7XG5cbn0pKGpRdWVyeSk7IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjb250YWN0Rm9ybSgpIHtcblxuXHQvKiBDT05UQUNUICovXG5cdCQoZnVuY3Rpb24oKSB7XG5cblx0XHRjb25zb2xlLmxvZygnaGVsbG8nKTtcblx0XHQvLyBHZXQgdGhlIGZvcm0uXG5cdFx0dmFyIGZvcm0gPSAkKCcjYWpheC1jb250YWN0Jyk7XG5cblx0XHQvLyBHZXQgdGhlIG1lc3NhZ2VzIGRpdi5cblx0XHR2YXIgZm9ybU1lc3NhZ2VzID0gJCgnI2Zvcm0tbWVzc2FnZXMnKTtcblxuXHRcdC8vIFNldCB1cCBhbiBldmVudCBsaXN0ZW5lciBmb3IgdGhlIGNvbnRhY3QgZm9ybS5cblx0XHQkKGZvcm0pLnN1Ym1pdChmdW5jdGlvbihlKSB7XG5cdFx0XHQvLyBTdG9wIHRoZSBicm93c2VyIGZyb20gc3VibWl0dGluZyB0aGUgZm9ybS5cblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0Ly8gZGlzcGxheSB0aGUgc3Bpbm5lclxuXHRcdFx0c3Bpbm5lci5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcblxuXHRcdFx0Ly8gU2VyaWFsaXplIHRoZSBmb3JtIGRhdGEuXG5cdFx0XHR2YXIgZm9ybURhdGEgPSAkKGZvcm0pLnNlcmlhbGl6ZSgpO1xuXG5cdFx0XHQvLyBTdWJtaXQgdGhlIGZvcm0gdXNpbmcgQUpBWC5cblx0XHRcdCQuYWpheCh7XG5cdFx0XHRcdHR5cGU6ICdQT1NUJyxcblx0XHRcdFx0dXJsOiAkKGZvcm0pLmF0dHIoJ2FjdGlvbicpLFxuXHRcdFx0XHRkYXRhOiBmb3JtRGF0YVxuXHRcdFx0fSlcblx0XHRcdC5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBmb3JtTWVzc2FnZXMgZGl2IGhhcyB0aGUgJ3N1Y2Nlc3MnIGNsYXNzLlxuXHRcdFx0XHQkKGZvcm1NZXNzYWdlcykucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7XG5cdFx0XHRcdCQoZm9ybU1lc3NhZ2VzKS5hZGRDbGFzcygnc3VjY2VzcycpO1xuXG5cdFx0XHRcdC8vIGhpZGUgdGhlIHNwaW5uZXJcblx0XHRcdFx0c3Bpbm5lci5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuXG5cdFx0XHRcdC8vIFNldCB0aGUgbWVzc2FnZSB0ZXh0LlxuXHRcdFx0XHQvLyAkKGZvcm1NZXNzYWdlcykudGV4dChyZXNwb25zZSk7IC8vIHJlc3BvbnNlID0gc2VydmVyIGRldGFpbHNcblx0XHRcdFx0JChmb3JtTWVzc2FnZXMpLnRleHQoJ1RoYW5rcyEgWW91ciBtZXNzYWdlIGhhcyBiZWVuIHJlY2lldmVkLicpO1xuXG5cblx0XHRcdFx0Ly8gQ2xlYXIgdGhlIGZvcm0uXG5cdFx0XHRcdCQoJyNuYW1lJykudmFsKCcnKTtcblx0XHRcdFx0JCgnI2VtYWlsJykudmFsKCcnKTtcblx0XHRcdFx0JCgnI21lc3NhZ2UnKS52YWwoJycpO1xuXHRcdFx0fSlcblx0XHRcdC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgdGhlIGZvcm1NZXNzYWdlcyBkaXYgaGFzIHRoZSAnZXJyb3InIGNsYXNzLlxuXHRcdFx0XHQkKGZvcm1NZXNzYWdlcykucmVtb3ZlQ2xhc3MoJ3N1Y2Nlc3MnKTtcblx0XHRcdFx0JChmb3JtTWVzc2FnZXMpLmFkZENsYXNzKCdlcnJvcicpO1xuXG5cdFx0XHRcdC8vIFNldCB0aGUgbWVzc2FnZSB0ZXh0LlxuXHRcdFx0XHRpZiAoZGF0YS5yZXNwb25zZVRleHQgIT09ICcnKSB7XG5cdFx0XHRcdFx0JChmb3JtTWVzc2FnZXMpLnRleHQoZGF0YS5yZXNwb25zZVRleHQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQoZm9ybU1lc3NhZ2VzKS50ZXh0KCdPb3BzISBBbiBlcnJvciBvY2N1cmVkIGFuZCB5b3VyIG1lc3NhZ2UgY291bGQgbm90IGJlIHNlbnQuJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0fSk7XG5cblx0fSk7XG5cbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzY3JvbGxJdCgpIHtcblxuXG5cbi8qKlxuICogU2Nyb2xsSXRcbiAqIFNjcm9sbEl0LmpzKHNjcm9sbOKAoml04oCiZG904oCianMpIG1ha2VzIGl0IGVhc3kgdG8gbWFrZSBsb25nLCB2ZXJ0aWNhbGx5IHNjcm9sbGluZyBwYWdlcy5cbiAqXG4gKiBMYXRlc3QgdmVyc2lvbjogaHR0cHM6Ly9naXRodWIuY29tL2NtcG9saXMvc2Nyb2xsSXQuanNcbiAqXG4gKiBMaWNlbnNlIDxodHRwczovL2dpdGh1Yi5jb20vY21wb2xpcy9zY3JvbGxJdC5qcy9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dD5cbiAqL1xuKGZ1bmN0aW9uKCQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgcGx1Z2luTmFtZSA9ICdTY3JvbGxJdCcsXG4gICAgICAgIHBsdWdpblZlcnNpb24gPSAnMS4wLjMnO1xuXG4gICAgLypcbiAgICAgKiBPUFRJT05TXG4gICAgICovXG4gICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICB1cEtleTogMzgsXG4gICAgICAgIGRvd25LZXk6IDQwLFxuICAgICAgICBlYXNpbmc6ICdsaW5lYXInLFxuICAgICAgICBzY3JvbGxUaW1lOiA2MDAsXG4gICAgICAgIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcbiAgICAgICAgb25QYWdlQ2hhbmdlOiBudWxsLFxuICAgICAgICB0b3BPZmZzZXQgOiB7IHZhbDogMH1cbiAgICB9O1xuXG4gICAgdmFyIGxpc3RlbmVycyA9IHtcbiAgICAgICAgc2Nyb2xsIDogbnVsbCxcbiAgICAgICAga2V5ZG93bjogbnVsbCxcbiAgICAgICAgY2xpY2s6IG51bGwsXG4gICAgfTtcblxuXG4gICAgJC5zY3JvbGxJdCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICAgICAgICAvKlxuICAgICAgICAgKiBERUNMQVJBVElPTlNcbiAgICAgICAgICovXG4gICAgICAgIHZhciBzZXR0aW5ncyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zKSxcbiAgICAgICAgICAgIGFjdGl2ZSA9IDAsXG4gICAgICAgICAgICBsYXN0SW5kZXggPSAkKCdbZGF0YS1zY3JvbGwtaW5kZXhdOmxhc3QnKS5hdHRyKCdkYXRhLXNjcm9sbC1pbmRleCcpO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIE1FVEhPRFNcbiAgICAgICAgICovXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIG5hdmlnYXRlXG4gICAgICAgICAqXG4gICAgICAgICAqIHNldHMgdXAgbmF2aWdhdGlvbiBhbmltYXRpb25cbiAgICAgICAgICovXG4gICAgICAgIHZhciBuYXZpZ2F0ZSA9IGZ1bmN0aW9uKG5keCkge1xuICAgICAgICAgICAgaWYobmR4IDwgMCB8fCBuZHggPiBsYXN0SW5kZXgpIHJldHVybjtcblxuICAgICAgICAgICAgdmFyIHRhcmdldFRvcCA9ICQoJ1tkYXRhLXNjcm9sbC1pbmRleD0nICsgbmR4ICsgJ10nKS5vZmZzZXQoKS50b3AgKyBzZXR0aW5ncy50b3BPZmZzZXQudmFsICsgMTtcbiAgICAgICAgICAgICQoJ2h0bWwsYm9keScpLmFuaW1hdGUoe1xuICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogdGFyZ2V0VG9wLFxuICAgICAgICAgICAgICAgIGVhc2luZzogc2V0dGluZ3MuZWFzaW5nXG4gICAgICAgICAgICB9LCBzZXR0aW5ncy5zY3JvbGxUaW1lKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogZG9TY3JvbGxcbiAgICAgICAgICpcbiAgICAgICAgICogcnVucyBuYXZpZ2F0aW9uKCkgd2hlbiBjcml0ZXJpYSBhcmUgbWV0XG4gICAgICAgICAqL1xuICAgICAgICB2YXIgZG9TY3JvbGwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoXCJbZGF0YS1zY3JvbGwtbmF2XVwiKS5hdHRyKCdkYXRhLXNjcm9sbC1uYXYnKSB8fFxuICAgICAgICAgICAgJChlLnRhcmdldCkuY2xvc2VzdChcIltkYXRhLXNjcm9sbC1nb3RvXVwiKS5hdHRyKCdkYXRhLXNjcm9sbC1nb3RvJyk7XG4gICAgICAgICAgICBuYXZpZ2F0ZShwYXJzZUludCh0YXJnZXQsIDEwKSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGtleU5hdmlnYXRpb25cbiAgICAgICAgICpcbiAgICAgICAgICogc2V0cyB1cCBrZXlib2FyZCBuYXZpZ2F0aW9uIGJlaGF2aW9yXG4gICAgICAgICAqL1xuICAgICAgICB2YXIga2V5TmF2aWdhdGlvbiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gZS53aGljaDtcbiAgICAgICAgICAgIGlmKCQoJ2h0bWwsYm9keScpLmlzKCc6YW5pbWF0ZWQnKSAmJiAoa2V5ID09IHNldHRpbmdzLnVwS2V5IHx8IGtleSA9PSBzZXR0aW5ncy5kb3duS2V5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGtleSA9PSBzZXR0aW5ncy51cEtleSAmJiBhY3RpdmUgPiAwKSB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdGUocGFyc2VJbnQoYWN0aXZlLCAxMCkgLSAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYoa2V5ID09IHNldHRpbmdzLmRvd25LZXkgJiYgYWN0aXZlIDwgbGFzdEluZGV4KSB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdGUocGFyc2VJbnQoYWN0aXZlLCAxMCkgKyAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogdXBkYXRlQWN0aXZlXG4gICAgICAgICAqXG4gICAgICAgICAqIHNldHMgdGhlIGN1cnJlbnRseSBhY3RpdmUgaXRlbVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHVwZGF0ZUFjdGl2ZSA9IGZ1bmN0aW9uKG5keCkge1xuICAgICAgICAgICAgaWYoc2V0dGluZ3Mub25QYWdlQ2hhbmdlICYmIG5keCAmJiAoYWN0aXZlICE9IG5keCkpIHNldHRpbmdzLm9uUGFnZUNoYW5nZShuZHgpO1xuXG4gICAgICAgICAgICBhY3RpdmUgPSBuZHg7XG4gICAgICAgICAgICAkKCdbZGF0YS1zY3JvbGwtbmF2XScpLnJlbW92ZUNsYXNzKHNldHRpbmdzLmFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICAgICQoJ1tkYXRhLXNjcm9sbC1uYXY9JyArIG5keCArICddJykuYWRkQ2xhc3Moc2V0dGluZ3MuYWN0aXZlQ2xhc3MpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiB3YXRjaEFjdGl2ZVxuICAgICAgICAgKlxuICAgICAgICAgKiB3YXRjaGVzIGN1cnJlbnRseSBhY3RpdmUgaXRlbSBhbmQgdXBkYXRlcyBhY2NvcmRpbmdseVxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIHdhdGNoQWN0aXZlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgd2luVG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXG4gICAgICAgICAgICB2YXIgdmlzaWJsZSA9ICQoJ1tkYXRhLXNjcm9sbC1pbmRleF0nKS5maWx0ZXIoZnVuY3Rpb24obmR4LCBkaXYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luVG9wID49ICQoZGl2KS5vZmZzZXQoKS50b3AgKyBzZXR0aW5ncy50b3BPZmZzZXQudmFsICYmXG4gICAgICAgICAgICAgICAgd2luVG9wIDwgJChkaXYpLm9mZnNldCgpLnRvcCArIChzZXR0aW5ncy50b3BPZmZzZXQudmFsKSArICQoZGl2KS5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgbmV3QWN0aXZlID0gdmlzaWJsZS5maXJzdCgpLmF0dHIoJ2RhdGEtc2Nyb2xsLWluZGV4Jyk7XG4gICAgICAgICAgICB1cGRhdGVBY3RpdmUobmV3QWN0aXZlKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKlxuICAgICAgICAgKiBydW5zIG1ldGhvZHNcbiAgICAgICAgICovXG4gICAgICAgICQod2luZG93KS5vbignc2Nyb2xsJyx3YXRjaEFjdGl2ZSkuc2Nyb2xsKCk7XG5cbiAgICAgICAgJCh3aW5kb3cpLm9uKCdrZXlkb3duJywga2V5TmF2aWdhdGlvbik7XG5cbiAgICAgICAgdmFyIGNsaWNrSGFuZGxlciA9IGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZG9TY3JvbGwoZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJCgnYm9keScpLm9uKCdjbGljaycsJ1tkYXRhLXNjcm9sbC1uYXZdLCBbZGF0YS1zY3JvbGwtZ290b10nLCBjbGlja0hhbmRsZXIpO1xuXG4gICAgICAgIGxpc3RlbmVycy5zY3JvbGwgPSB3YXRjaEFjdGl2ZTtcbiAgICAgICAgbGlzdGVuZXJzLmtleWRvd24gPSBrZXlOYXZpZ2F0aW9uO1xuICAgICAgICBsaXN0ZW5lcnMuY2xpY2sgPSBjbGlja0hhbmRsZXI7XG4gICAgfTtcblxuICAgICQuc2Nyb2xsSXQubGlzdGVuZXJzID0gbGlzdGVuZXJzO1xuXG4gICAgJC5zY3JvbGxJdC5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkKHdpbmRvdykub2ZmKCdzY3JvbGwnLCBsaXN0ZW5lcnMuc2Nyb2xsKTtcbiAgICAgICAgJCh3aW5kb3cpLm9mZigna2V5ZG93bicsIGxpc3RlbmVycy5rZXlkb3duKTtcbiAgICAgICAgJCgnYm9keScpLm9mZignY2xpY2snLCdbZGF0YS1zY3JvbGwtbmF2XSwgW2RhdGEtc2Nyb2xsLWdvdG9dJywgbGlzdGVuZXJzLmNsaWNrKTtcbiAgICB9O1xuXG5cblxuXG5cblxuXG5cblxuXG5cbiAgICB2YXIgbVF1ZXJ5ID0gd2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiAxMDAwcHgpXCIpO1xuICAgIG1RdWVyeS5hZGRMaXN0ZW5lcihteV9mdW5jdGlvbik7XG4gICAgbXlfZnVuY3Rpb24obVF1ZXJ5KTtcblxuICAgIHZhciB0b3BPZmZzZXQgPSB7XG4gICAgICB2YWw6IC03MFxuICAgIH07XG5cbiAgICBmdW5jdGlvbiBteV9mdW5jdGlvbihtUXVlcnkpIHtcbiAgICAgIGlmIChtUXVlcnkubWF0Y2hlcykge1xuICAgICAgICAkKCdib2R5JykuYWRkQ2xhc3MoJ3NtLXNjcmVlbicpO1xuICAgICAgICAkLnNjcm9sbEl0KHtcbiAgICAgICAgICAgICB0b3BPZmZzZXQgOiB0b3BPZmZzZXRcbiAgICAgICAgfSk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoJ2JvZHknKS5yZW1vdmVDbGFzcygnc20tc2NyZWVuJyk7XG4gICAgICAgICQuc2Nyb2xsSXQuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH0gXG5cblxuXG5cblxufShqUXVlcnkpKTtcblxuXG5cbn07Il19
